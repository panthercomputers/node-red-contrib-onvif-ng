<!--
  Original work:
  Copyright 2018 Bart Butenaers

  Modifications:
  Copyright 2025 Panther Computers

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0
-->

<script type="text/javascript">
RED.nodes.registerType('onvif-config', {
    category: 'config',
    defaults: {
        xaddress: { value: '', required: true },
        port: { value: 80 },
        secure: { value: false }
    },
    credentials: {
        user: { type: 'text' },
        password: { type: 'password' }
    },
    label: function () {
        return this.xaddress || 'ONVIF Device';
    }
});
</script>

<script type="text/x-red" data-template-name="onvif-config">
    <div class="form-row">
        <label for="node-config-input-xaddress">
            <i class="fa fa-globe"></i> Camera Address
        </label>
        <input type="text" id="node-config-input-xaddress" placeholder="192.168.1.50">
    </div>

    <div class="form-row">
        <label for="node-config-input-port">
            <i class="fa fa-plug"></i> Port
        </label>
        <input type="number" id="node-config-input-port" style="width:80px;">
    </div>

    <div class="form-row">
        <label for="node-config-input-secure">
            <i class="fa fa-lock"></i> Secure (HTTPS)
        </label>
        <input type="checkbox" id="node-config-input-secure" style="width:auto;">
    </div>

    <hr>

    <div class="form-row">
        <label for="node-config-input-user">
            <i class="fa fa-user"></i> Username
        </label>
        <input type="text" id="node-config-input-user" autocomplete="off">
    </div>

    <div class="form-row">
        <label for="node-config-input-password">
            <i class="fa fa-key"></i> Password
        </label>
        <input type="password" id="node-config-input-password" autocomplete="new-password">
    </div>

    <div class="form-tips">
        <b>Tip:</b> Credentials are encrypted by Node-RED.
        <br>
        Optional environment variables:
        <ul>
            <li><code>ONVIF_USER</code> / <code>ONVIF_PASS</code></li>
            <li><code>ONVIF_CAM_&lt;IP&gt;_USER</code></li>
            <li><code>ONVIF_CAM_&lt;IP&gt;_PASS</code></li>
        </ul>
    </div>
</script>

<script type="text/x-red" data-help-name="onvif-config">
    <p>
        Defines a reusable ONVIF camera connection.
        Credentials are stored securely and are not exported with flows.
    </p>
    <p>
        Environment variables may be used to enable portable deployments.
    </p>
</script>
